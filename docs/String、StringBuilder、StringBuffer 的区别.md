在 Java 中，`String`、`StringBuilder` 和 `StringBuffer` 都是用于处理字符串的类，但它们在**可变性**、**性能**和**线程安全性**方面存在重要的区别。了解它们的不同之处可以帮助我们在适当的场景中选择合适的类。

### 1. **`String`**
- **不可变性**：`String` 是不可变的，也就是说一旦创建，字符串的值就无法更改。每次对字符串进行修改（如拼接、替换等）时，都会创建一个新的 `String` 对象，而原始的字符串对象保持不变。
  
  **示例**：
  ```java
  String str = "Hello";
  str = str + " World";  // 创建了一个新的字符串对象
  ```

  **优点**：
  - **线程安全**：由于 `String` 是不可变的，因此在多个线程中使用时是安全的。
  - **字符串常量池优化**：`String` 使用字符串常量池，可以减少内存的使用。

  **缺点**：
  - **性能问题**：每次修改 `String` 对象时，都会创建新的对象，这在需要频繁修改字符串的场景中会导致较大的性能开销。

### 2. **`StringBuilder`**
- **可变性**：`StringBuilder` 是可变的，允许在不创建新对象的情况下修改字符串内容。因此，使用 `StringBuilder` 进行字符串操作时不会像 `String` 那样创建新的对象，从而提高了性能。
  
- **线程不安全**：`StringBuilder` 不是线程安全的，这意味着如果多个线程同时访问同一个 `StringBuilder` 对象，可能会发生数据不一致的情况。

  **示例**：
  ```java
  StringBuilder sb = new StringBuilder("Hello");
  sb.append(" World");  // 直接修改原对象
  System.out.println(sb.toString());  // 输出 "Hello World"
  ```

  **优点**：
  - **高性能**：由于它是可变的，且不会创建新对象，适合在单线程环境下执行大量的字符串操作，如字符串拼接、插入等。

  **缺点**：
  - **线程不安全**：在多线程环境中使用时，需要手动进行同步，确保安全性。

### 3. **`StringBuffer`**
- **可变性**：`StringBuffer` 与 `StringBuilder` 类似，也是可变的，允许修改字符串内容。与 `StringBuilder` 不同的是，`StringBuffer` 的方法是同步的，保证了线程安全性。

- **线程安全**：`StringBuffer` 是线程安全的，因为它的所有方法都使用了 `synchronized` 关键字，确保在多线程环境中不会出现数据不一致的问题。

  **示例**：
  ```java
  StringBuffer sb = new StringBuffer("Hello");
  sb.append(" World");  // 直接修改原对象
  System.out.println(sb.toString());  // 输出 "Hello World"
  ```

  **优点**：
  - **线程安全**：适合在多线程环境中进行字符串操作。

  **缺点**：
  - **性能较低**：由于 `StringBuffer` 的所有方法都是同步的，因此在单线程环境中，`StringBuffer` 的性能比 `StringBuilder` 要低。

### 区别总结

| 特性                 | `String`                | `StringBuilder`        | `StringBuffer`         |
|----------------------|-------------------------|------------------------|------------------------|
| **可变性**            | 不可变                  | 可变                   | 可变                   |
| **线程安全性**        | 线程安全                | 线程不安全             | 线程安全               |
| **性能**              | 低（每次修改创建新对象）| 高（单线程环境高效）   | 较低（由于同步，性能较低） |
| **适用场景**          | 字符串内容不变的场景    | 单线程环境下的频繁字符串操作 | 多线程环境下的频繁字符串操作 |
| **底层实现**          | 字符串常量池，数组      | 可变字符数组           | 同步的可变字符数组     |

### 适用场景

- **`String`**：用于字符串不需要修改的场景。适合用于不可变数据的传递，如日志记录、常量字符串等。由于 `String` 对象的不可变性，它在多线程环境下是安全的。
  
- **`StringBuilder`**：适合用于单线程环境中需要对字符串进行频繁修改的场景，如拼接、插入、替换等操作。在这样的场景下，`StringBuilder` 提供了比 `String` 更高的性能。

- **`StringBuffer`**：用于多线程环境中需要修改字符串的场景。在多线程中，它提供了线程安全的操作，但由于同步开销，其性能比 `StringBuilder` 略低。

### 选择建议

- 如果你需要对字符串进行频繁的修改操作，而且是在**单线程环境**下，建议使用 **`StringBuilder`**，因为它性能更好。
  
- 如果你在**多线程环境**下需要对字符串进行修改，并且多个线程可能会共享同一个字符串，应该使用 **`StringBuffer`**，因为它是线程安全的。

- 如果字符串不需要修改，直接使用 **`String`**，因为它具有更好的内存管理（字符串常量池）和安全性。

### 性能比较

以下是三者在不同场景下的性能对比：
1. **单线程下，频繁修改字符串**：
   - `StringBuilder` > `StringBuffer` > `String`（`String` 每次都会创建新的对象，性能最低）。
   
2. **多线程下，频繁修改字符串**：
   - `StringBuffer` 是首选，因为它是线程安全的。`StringBuilder` 在这种场景下不适用，可能会导致线程安全问题。

总结来说，`String` 是不可变的，而 `StringBuilder` 和 `StringBuffer` 是可变的。在单线程环境下，`StringBuilder` 性能优于 `StringBuffer`，而在多线程环境下，`StringBuffer` 提供了线程安全的字符串操作。